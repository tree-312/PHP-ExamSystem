-- 测试SQL，生产环境请无视

use exam_system;

-- ===================================================================
-- 题库1：数据挖掘 → 章节1：支持向量机 (chapter_id=1, bank_id=1)
-- ===================================================================

-- 单选题 (8题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(1, 1, '支持向量机（SVM）的核心思想是什么？', 'single', '["B"]', 'SVM旨在找到最大间隔的超平面。'),
(1, 1, '在SVM中，“支持向量”指的是什么？', 'single', '["C"]', '支持向量是距离决策边界最近的样本点。'),
(1, 1, 'SVM适用于哪种类型的数据分布？', 'single', '["A"]', '尤其适合高维、小样本场景。'),
(1, 1, '线性可分情况下，SVM的决策边界具有什么性质？', 'single', '["D"]', '具有最大分类间隔。'),
(1, 1, 'SVM如何处理线性不可分问题？', 'single', '["B"]', '通过核技巧映射到高维空间。'),
(1, 1, '软间隔SVM引入了哪个参数来控制容错能力？', 'single', '["C"]', 'C参数越大，容错越小。'),
(1, 1, '当C值非常大时，SVM模型会倾向于什么？', 'single', '["A"]', '低偏差、高方差，可能过拟合。'),
(1, 1, 'SVM是否对特征缩放敏感？为什么？', 'single', '["D"]', '是，因为距离计算受量纲影响。');

-- 对应选项
INSERT INTO options (question_id, option_label, option_text, sort_order) VALUES
(1, 'A', '最小化训练误差', 1),
(1, 'B', '最大化分类间隔', 2),
(1, 'C', '最小化模型复杂度', 3),
(1, 'D', '最大化准确率', 4),

(2, 'A', '所有训练样本', 1),
(2, 'B', '被正确分类的样本', 2),
(2, 'C', '距离决策边界最近的样本', 3),
(2, 'D', '随机选择的样本', 4),

(3, 'A', '高维、小样本', 1),
(3, 'B', '低维、大样本', 2),
(3, 'C', '非结构化文本', 3),
(3, 'D', '时间序列数据', 4),

(4, 'A', '最小间隔', 1),
(4, 'B', '任意间隔', 2),
(4, 'C', '固定间隔', 3),
(4, 'D', '最大间隔', 4),

(5, 'A', '增加更多特征', 1),
(5, 'B', '使用核函数', 2),
(5, 'C', '删除噪声点', 3),
(5, 'D', '改用决策树', 4),

(6, 'A', 'γ', 1),
(6, 'B', 'σ', 2),
(6, 'C', 'C', 3),
(6, 'D', 'λ', 4),

(7, 'A', '过拟合', 1),
(7, 'B', '欠拟合', 2),
(7, 'C', '泛化能力强', 3),
(7, 'D', '训练速度变快', 4),

(8, 'A', '不敏感，因SVM是非参数模型', 1),
(8, 'B', '不敏感，因使用核函数', 2),
(8, 'C', '仅对分类标签敏感', 3),
(8, 'D', '敏感，因依赖距离计算', 4);

-- 多选题 (8题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(1, 1, '常见的SVM核函数有哪些？（请列举至少三种）', 'multiple', '["A","B","C","D"]', '常用核包括线性、多项式、RBF、Sigmoid。'),
(1, 1, 'SVM的训练时间复杂度通常是多少？', 'multiple', '["B","C"]', '一般为O(n²)到O(n³)，n为样本数。'),
(1, 1, '以下哪些说法关于SVM是正确的？', 'multiple', '["A","D"]', 'SVM对高维有效，但对大规模数据慢。'),
(1, 1, 'RBF核函数的参数γ对模型有何影响？', 'multiple', '["A","C"]', 'γ大 → 过拟合；γ小 → 欠拟合。'),
(1, 1, 'SVM能否直接用于多分类问题？如何实现？', 'multiple', '["B","C"]', '需借助OvO或OvR策略。'),
(1, 1, '以下哪些是SVM的优点？', 'multiple', '["A","B","D"]', '高维有效、泛化好、核灵活。'),
(1, 1, '在样本不平衡的情况下，SVM可能出现什么问题？', 'multiple', '["C","D"]', '偏向多数类，召回率低。'),
(1, 1, '如何获得SVM的概率估计？', 'multiple', '["A","B"]', '需启用概率校准（如Platt Scaling）。');

-- 多选题选项
INSERT INTO options (question_id, option_label, option_text, sort_order) VALUES
(9, 'A', '线性核', 1),
(9, 'B', '多项式核', 2),
(9, 'C', 'RBF核', 3),
(9, 'D', 'Sigmoid核', 4),

(10, 'A', 'O(n)', 1),
(10, 'B', 'O(n²)', 2),
(10, 'C', 'O(n³)', 3),
(10, 'D', 'O(log n)', 4),

(11, 'A', '在高维空间表现良好', 1),
(11, 'B', '训练速度极快', 2),
(11, 'C', '天然支持多分类', 3),
(11, 'D', '对小样本有效', 4),

(12, 'A', 'γ越大，模型越复杂，易过拟合', 1),
(12, 'B', 'γ越大，决策边界越平滑', 2),
(12, 'C', 'γ越小，模型越简单，易欠拟合', 3),
(12, 'D', 'γ不影响模型性能', 4),

(13, 'A', '可以，原生支持', 1),
(13, 'B', '需使用一对多（OvR）', 2),
(13, 'C', '需使用一对一（OvO）', 3),
(13, 'D', '无法用于多分类', 4),

(14, 'A', '在高维空间有效', 1),
(14, 'B', '泛化能力强', 2),
(14, 'C', '训练速度快', 3),
(14, 'D', '可通过核函数处理非线性', 4),

(15, 'A', '精度显著提升', 1),
(15, 'B', 'F1值均衡', 2),
(15, 'C', '对少数类识别能力下降', 3),
(15, 'D', '分类边界偏向多数类', 4),

(16, 'A', '使用sklearn的probability=True', 1),
(16, 'B', '通过Platt Scaling校准', 2),
(16, 'C', 'SVM原生输出概率', 3),
(16, 'D', '无法获得概率', 4);

-- 填空题 (6题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(1, 1, 'SVM中的“最大间隔”是指______与______之间的距离最大化。', 'fill', '["正样本超平面", "负样本超平面"]', '即两个平行支持超平面之间的距离。'),
(1, 1, 'RBF核函数的全称是______。', 'fill', '["径向基函数"]', ''),
(1, 1, '软间隔SVM通过引入______变量来允许部分样本违反间隔约束。', 'fill', '["松弛"]', '即slack variable。'),
(1, 1, 'SVM优化问题的对偶形式中，拉格朗日乘子α_i > 0 的样本即为______。', 'fill', '["支持向量"]', ''),
(1, 1, '在sklearn中，SVC的默认核函数是______。', 'fill', '["rbf"]', ''),
(1, 1, '结构风险最小化原则平衡了______和______。', 'fill', '["经验风险", "置信风险"]', '');

-- 论述题 (3题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(1, 1, '请简述SVM对噪声点的鲁棒性。', 'essay', '["支持向量", "软间隔", "C参数", "鲁棒性有限"]', '硬间隔SVM对噪声敏感，软间隔通过C调节可提升鲁棒性。'),
(1, 1, 'KKT条件在SVM优化中有什么意义？', 'essay', '["最优解必要条件", "支持向量判定", "α与y关系"]', 'KKT条件连接原始与对偶问题，确定支持向量。'),
(1, 1, '为什么SVM在高维空间中表现良好？', 'essay', '["核技巧", "最大间隔", "维度不影响间隔定义"]', 'SVM依赖内积，核函数隐式映射，避免维度灾难。');

-- ===================================================================
-- 题库1：数据挖掘 → 章节2：线性回归 (chapter_id=2, bank_id=1)
-- ===================================================================

-- 单选题 (8题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(1, 2, '线性回归的基本假设是什么？', 'single', '["C"]', '包括线性、独立、正态、同方差。'),
(1, 2, '最小二乘法的目标函数是什么？', 'single', '["A"]', '最小化残差平方和。'),
(1, 2, 'R²（决定系数）的取值范围通常是？', 'single', '["B"]', '一般[0,1]，但可为负。'),
(1, 2, '多重共线性对线性回归模型有何影响？', 'single', '["D"]', '导致系数不稳定、标准误增大。'),
(1, 2, 'Lasso回归为何具有特征选择能力？', 'single', '["A"]', 'L1正则可使部分系数压缩至0。'),
(1, 2, '为什么在使用正则化时需要对特征进行标准化？', 'single', '["C"]', '防止量纲影响正则项惩罚力度。'),
(1, 2, '线性回归中的p值用于检验什么？', 'single', '["B"]', '检验系数是否显著不为0。'),
(1, 2, '调整后的R²与普通R²的主要区别是？', 'single', '["D"]', '惩罚了自变量数量。');

-- 选项
INSERT INTO options (question_id, option_label, option_text, sort_order) VALUES
(17, 'A', '误差服从均匀分布', 1),
(17, 'B', '特征必须正态分布', 2),
(17, 'C', '误差独立同分布且正态', 3),
(17, 'D', '因变量必须是整数', 4),

(18, 'A', '最小化残差平方和', 1),
(18, 'B', '最小化绝对误差', 2),
(18, 'C', '最大化似然函数', 3),
(18, 'D', '最小化预测值', 4),

(19, 'A', '(-∞, +∞)', 1),
(19, 'B', '[0, 1]', 2),
(19, 'C', '[−1, 1]', 3),
(19, 'D', '[0, 100]', 4),

(20, 'A', '提高模型精度', 1),
(20, 'B', '减少训练时间', 2),
(20, 'C', '增强模型解释性', 3),
(20, 'D', '导致系数估计不稳定', 4),

(21, 'A', 'L1正则可将系数压缩至0', 1),
(21, 'B', 'L1正则计算更快', 2),
(21, 'C', 'L1正则防止过拟合更强', 3),
(21, 'D', 'L1正则适用于小样本', 4),

(22, 'A', '标准化可加速收敛', 1),
(22, 'B', '标准化是线性回归要求', 2),
(22, 'C', '避免量纲影响正则惩罚', 3),
(22, 'D', '标准化提高R²值', 4),

(23, 'A', '检验模型整体显著性', 1),
(23, 'B', '检验单个系数是否为0', 2),
(23, 'C', '检验残差正态性', 3),
(23, 'D', '检验多重共线性', 4),

(24, 'A', '调整后R²总是更大', 1),
(24, 'B', '调整后R²不随变量增加而增', 2),
(24, 'C', '调整后R²用于分类任务', 3),
(24, 'D', '调整后R²惩罚变量数量', 4);

-- 多选题 (8题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(1, 2, '线性回归要求误差项满足哪些统计假设？', 'multiple', '["A","B","C","D"]', 'LINEAR：线性、独立、正态、等方差。'),
(1, 2, '如何检测多重共线性？', 'multiple', '["A","C"]', 'VIF和相关系数矩阵。'),
(1, 2, '以下哪些是正则化方法？', 'multiple', '["A","B","C"]', 'Ridge、Lasso、Elastic Net。'),
(1, 2, '标准化对线性回归的影响包括？', 'multiple', '["A","B"]', '影响正则化效果，不影响无正则模型。'),
(1, 2, '以下关于Ridge回归的说法正确的是？', 'multiple', '["B","D"]', '系数不会为0，可解决共线性。'),
(1, 2, '残差图可用于诊断？', 'multiple', '["A","B","C"]', '非线性、异方差、异常点。'),
(1, 2, 'Lasso回归的缺点包括？', 'multiple', '["B","C"]', '在高相关特征中随机选一，不稳定。'),
(1, 2, '线性回归不能直接用于分类的原因是？', 'multiple', '["A","D"]', '输出连续，无概率约束。');

-- 多选题选项
INSERT INTO options (question_id, option_label, option_text, sort_order) VALUES
(25, 'A', '线性关系', 1),
(25, 'B', '误差独立', 2),
(25, 'C', '误差正态分布', 3),
(25, 'D', '同方差性', 4),

(26, 'A', '计算VIF', 1),
(26, 'B', '查看R²', 2),
(26, 'C', '特征相关系数矩阵', 3),
(26, 'D', '残差图', 4),

(27, 'A', 'Ridge', 1),
(27, 'B', 'Lasso', 2),
(27, 'C', 'Elastic Net', 3),
(27, 'D', 'Dropout', 4),

(28, 'A', '对带正则化的模型至关重要', 1),
(28, 'B', '对无正则模型无影响', 2),
(28, 'C', '总能提高模型精度', 3),
(28, 'D', '必须在训练前完成', 4),

(29, 'A', '可将系数压缩至0', 1),
(29, 'B', '系数连续 shrinkage', 2),
(29, 'C', '不能处理共线性', 3),
(29, 'D', '可缓解共线性问题', 4),

(30, 'A', '非线性关系', 1),
(30, 'B', '异方差性', 2),
(30, 'C', '异常值', 3),
(30, 'D', '类别不平衡', 4),

(31, 'A', '计算速度快', 1),
(31, 'B', '在高相关特征中选择不稳定', 2),
(31, 'C', '可能忽略重要特征', 3),
(31, 'D', '无法处理连续变量', 4),

(32, 'A', '输出值可能超出[0,1]', 1),
(32, 'B', '无法处理离散特征', 2),
(32, 'C', '训练速度慢', 3),
(32, 'D', '不保证输出为概率', 4);

-- 填空题 (6题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(1, 2, '最小二乘法的损失函数是______。', 'fill', '["残差平方和"]', ''),
(1, 2, '方差膨胀因子（VIF）的阈值通常为______。', 'fill', '["10"]', ''),
(1, 2, 'Ridge回归的正则项是______范数。', 'fill', '["L2"]', ''),
(1, 2, 'Lasso回归的正则项是______范数。', 'fill', '["L1"]', ''),
(1, 2, 'Elastic Net结合了______和______正则化。', 'fill', '["L1", "L2"]', ''),
(1, 2, '线性回归中，若特征未标准化，Ridge会______惩罚大尺度特征。', 'fill', '["过度"]', '');

-- 论述题 (3题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(1, 2, '请简述线性回归在实际业务场景中的一个应用案例。', 'essay', '["房价预测", "销量预测", "风险评估"]', '例如：基于面积、位置等预测房价。'),
(1, 2, '什么是异方差性？它对线性回归有何影响？', 'essay', '["方差非恒定", "标准误失真", "t检验失效"]', '导致推断不准确，需用稳健标准误。'),
(1, 2, '如何通过Box-Cox变换改善线性回归的性能？', 'essay', '["稳定方差", "增强线性", "正态化残差"]', '对因变量做幂变换，改善模型假设。');

-- ===================================================================
-- 题库2：Java基础 → 章节1：面向对象 (chapter_id=3, bank_id=2)
-- ===================================================================

-- 单选题 (8题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(2, 3, 'Java中面向对象的三大基本特性是什么？', 'single', '["B"]', '封装、继承、多态。'),
(2, 3, '封装的作用是什么？', 'single', '["A"]', '隐藏内部实现，提供公共接口。'),
(2, 3, 'Java是否支持多继承？', 'single', '["C"]', '不支持类的多继承，但支持接口多继承。'),
(2, 3, '方法重写（Override）需要满足哪些条件？', 'single', '["D"]', '方法名、参数、返回类型相同（协变除外）。'),
(2, 3, '抽象类和接口的区别是什么？', 'single', '["B"]', '抽象类可含具体方法，接口在Java8前不能。'),
(2, 3, '构造方法能否被继承？', 'single', '["C"]', '不能，但可通过super调用。'),
(2, 3, 'final类表示什么？', 'single', '["A"]', '不能被继承。'),
(2, 3, 'Java中所有类默认继承哪个类？', 'single', '["D"]', 'Object类。');

-- 选项
INSERT INTO options (question_id, option_label, option_text, sort_order) VALUES
(33, 'A', '抽象、封装、多态', 1),
(33, 'B', '封装、继承、多态', 2),
(33, 'C', '继承、多态、重载', 3),
(33, 'D', '封装、抽象、重载', 4),

(34, 'A', '隐藏内部实现细节', 1),
(34, 'B', '提高运行速度', 2),
(34, 'C', '减少代码行数', 3),
(34, 'D', '支持多线程', 4),

(35, 'A', '支持', 1),
(35, 'B', '部分支持', 2),
(35, 'C', '不支持类的多继承', 3),
(35, 'D', '仅支持三层继承', 4),

(36, 'A', '方法名相同即可', 1),
(36, 'B', '返回类型相同即可', 2),
(36, 'C', '参数列表不同', 3),
(36, 'D', '签名完全相同', 4),

(37, 'A', '接口可含字段，抽象类不能', 1),
(37, 'B', '抽象类可含具体方法', 2),
(37, 'C', '接口不能被实现', 3),
(37, 'D', '抽象类不能有构造器', 4),

(38, 'A', '可以', 1),
(38, 'B', '可以但需显式声明', 2),
(38, 'C', '不能', 3),
(38, 'D', '仅protected构造器可继承', 4),

(39, 'A', '不能被继承', 1),
(39, 'B', '不能被实例化', 2),
(39, 'C', '方法不能被重写', 3),
(39, 'D', '变量必须初始化', 4),

(40, 'A', 'Class', 1),
(40, 'B', 'System', 2),
(40, 'C', 'Main', 3),
(40, 'D', 'Object', 4);

-- 多选题 (8题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(2, 3, 'this关键字在Java中有哪几种用法？', 'multiple', '["A","B","C"]', '引用当前对象、调用构造器、区分成员变量。'),
(2, 3, '以下哪些说法关于多态是正确的？', 'multiple', '["A","D"]', '父类引用指向子类对象，运行时绑定。'),
(2, 3, 'Java 8之后，接口可以包含？', 'multiple', '["B","C","D"]', '默认方法、静态方法、常量。'),
(2, 3, '内部类有哪些类型？', 'multiple', '["A","B","C","D"]', '成员、局部、匿名、静态嵌套。'),
(2, 3, '以下关于final的说法正确的是？', 'multiple', '["A","B","C"]', 'final变量不可变，方法不可重写，类不可继承。'),
(2, 3, '对象初始化的顺序包括？', 'multiple', '["A","B","C","D"]', '静态块→实例块→构造器。'),
(2, 3, '组合优于继承的理由包括？', 'multiple', '["A","C"]', '更灵活，避免继承爆炸。'),
(2, 3, '以下哪些是面向对象设计原则？', 'multiple', '["A","B","D"]', '开闭原则、里氏替换、依赖倒置。');

-- 多选题选项
INSERT INTO options (question_id, option_label, option_text, sort_order) VALUES
(41, 'A', '引用当前对象', 1),
(41, 'B', '调用本类其他构造器', 2),
(41, 'C', '区分成员变量与参数', 3),
(41, 'D', '创建新对象', 4),

(42, 'A', '父类引用可指向子类对象', 1),
(42, 'B', '编译时确定方法调用', 2),
(42, 'C', '仅适用于静态方法', 3),
(42, 'D', '方法调用在运行时决定', 4),

(43, 'A', '抽象方法', 1),
(43, 'B', '默认方法（default）', 2),
(43, 'C', '静态方法', 3),
(43, 'D', '常量（public static final）', 4),

(44, 'A', '成员内部类', 1),
(44, 'B', '局部内部类', 2),
(44, 'C', '匿名内部类', 3),
(44, 'D', '静态嵌套类', 4),

(45, 'A', 'final变量值不可变', 1),
(45, 'B', 'final方法不可重写', 2),
(45, 'C', 'final类不可继承', 3),
(45, 'D', 'final接口不能被实现', 4),

(46, 'A', '静态初始化块', 1),
(46, 'B', '实例初始化块', 2),
(46, 'C', '父类构造器', 3),
(46, 'D', '子类构造器', 4),

(47, 'A', '更灵活，运行时可变', 1),
(47, 'B', '代码更短', 2),
(47, 'C', '避免类层次过深', 3),
(47, 'D', '性能更高', 4),

(48, 'A', '开闭原则', 1),
(48, 'B', '里氏替换原则', 2),
(48, 'C', '单一职责必须一个类一个方法', 3),
(48, 'D', '依赖倒置原则', 4);

-- 填空题 (6题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(2, 3, '方法重载（Overload）发生在______内，重写（Override）发生在______间。', 'fill', '["同一个类", "父子类"]', ''),
(2, 3, 'super关键字用于调用______的构造方法或成员。', 'fill', '["父类"]', ''),
(2, 3, '匿名内部类通常用于实现______或______。', 'fill', '["接口", "抽象类"]', ''),
(2, 3, '单例模式的饿汉式在______时创建实例。', 'fill', '["类加载"]', ''),
(2, 3, 'Java中，子类构造器第一行默认调用______。', 'fill', '["super()"]', ''),
(2, 3, '“开闭原则”指对______开放，对______关闭。', 'fill', '["扩展", "修改"]', '');

-- 论述题 (3题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(2, 3, '为什么Java中所有类都默认继承Object类？', 'essay', '["统一根类", "提供通用方法", "toString equals hashCode"]', '便于容器操作、反射、通用协议。'),
(2, 3, '请解释“开闭原则”在面向对象设计中的含义。', 'essay', '["扩展开放", "修改关闭", "通过抽象实现"]', '新增功能通过扩展而非修改现有代码。'),
(2, 3, '什么是聚合与组合？它们有何区别？', 'essay', '["生命周期", "所有权", "组合更强"]', '组合：整体不存在，部分销毁；聚合：部分可独立存在。');

-- ===================================================================
-- 题库2：Java基础 → 章节2：异常处理 (chapter_id=4, bank_id=2)
-- ===================================================================

-- 单选题 (8题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(2, 4, 'Java中的异常体系根类是？', 'single', '["C"]', 'Throwable是根，Exception和Error是子类。'),
(2, 4, 'Checked Exception和Unchecked Exception的区别是？', 'single', '["A"]', 'Checked需显式处理，Unchecked不需要。'),
(2, 4, 'finally块一定会执行吗？', 'single', '["B"]', '除System.exit()等极端情况外都会执行。'),
(2, 4, 'throw和throws的区别是？', 'single', '["D"]', 'throw抛对象，throws声明方法可能抛出的异常。'),
(2, 4, 'try-with-resources要求资源实现哪个接口？', 'single', '["C"]', 'AutoCloseable。'),
(2, 4, '多个catch块的排列顺序要求是？', 'single', '["A"]', '子类异常在前，父类在后。'),
(2, 4, '空指针异常（NullPointerException）属于？', 'single', '["B"]', 'RuntimeException，即Unchecked。'),
(2, 4, '为什么不要在finally中使用return？', 'single', '["D"]', '会覆盖try/catch中的return值。');

-- 选项
INSERT INTO options (question_id, option_label, option_text, sort_order) VALUES
(49, 'A', 'Exception', 1),
(49, 'B', 'Error', 2),
(49, 'C', 'Throwable', 3),
(49, 'D', 'RuntimeException', 4),

(50, 'A', 'Checked需编译器检查', 1),
(50, 'B', 'Unchecked更严重', 2),
(50, 'C', 'Checked是运行时异常', 3),
(50, 'D', '两者无区别', 4),

(51, 'A', '一定', 1),
(51, 'B', '不一定，如System.exit()', 2),
(51, 'C', '从不', 3),
(51, 'D', '仅在没有异常时', 4),

(52, 'A', 'throw用于方法声明', 1),
(52, 'B', 'throws用于抛出异常', 2),
(52, 'C', '两者完全相同', 3),
(52, 'D', 'throw抛异常对象，throws声明异常类型', 4),

(53, 'A', 'Serializable', 1),
(53, 'B', 'Cloneable', 2),
(53, 'C', 'AutoCloseable', 3),
(53, 'D', 'Comparable', 4),

(54, 'A', '子类异常在前', 1),
(54, 'B', '父类异常在前', 2),
(54, 'C', '任意顺序', 3),
(54, 'D', '按字母顺序', 4),

(55, 'A', 'Checked Exception', 1),
(55, 'B', 'Unchecked Exception', 2),
(55, 'C', 'Error', 3),
(55, 'D', '都不是', 4),

(56, 'A', '语法错误', 1),
(56, 'B', '性能下降', 2),
(56, 'C', '无法捕获异常', 3),
(56, 'D', '覆盖try/catch的返回值', 4);

-- 多选题 (8题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(2, 4, '以下哪些是Checked Exception？', 'multiple', '["A","B"]', 'IOException、SQLException需处理。'),
(2, 4, '以下哪些是RuntimeException？', 'multiple', '["C","D"]', 'NPE、ArrayIndexOutOfBoundsException是运行时异常。'),
(2, 4, 'finally块不执行的情况包括？', 'multiple', '["A","B"]', 'JVM退出或线程被杀死。'),
(2, 4, 'try-with-resources可自动关闭哪些资源？', 'multiple', '["A","C","D"]', 'FileInputStream、BufferedReader、Connection等。'),
(2, 4, '自定义异常类应继承？', 'multiple', '["A","B"]', 'Exception（Checked）或RuntimeException（Unchecked）。'),
(2, 4, '以下关于异常处理的最佳实践正确的是？', 'multiple', '["A","C"]', '捕获具体异常、记录日志。'),
(2, 4, 'Optional类可用于减少？', 'multiple', '["B","C"]', 'NPE和if-null检查。'),
(2, 4, '防御性编程在异常处理中的体现包括？', 'multiple', '["A","B","D"]', '参数校验、返回不可变对象、异常兜底。');

-- 多选题选项
INSERT INTO options (question_id, option_label, option_text, sort_order) VALUES
(57, 'A', 'IOException', 1),
(57, 'B', 'SQLException', 2),
(57, 'C', 'NullPointerException', 3),
(57, 'D', 'IllegalArgumentException', 4),

(58, 'A', 'IOException', 1),
(58, 'B', 'SQLException', 2),
(58, 'C', 'NullPointerException', 3),
(58, 'D', 'ArrayIndexOutOfBoundsException', 4),

(59, 'A', '调用System.exit()', 1),
(59, 'B', 'JVM崩溃', 2),
(59, 'C', '抛出异常', 3),
(59, 'D', 'return语句', 4),

(60, 'A', 'FileInputStream', 1),
(60, 'B', 'String', 2),
(60, 'C', 'BufferedReader', 3),
(60, 'D', 'Connection', 4),

(61, 'A', 'Exception', 1),
(61, 'B', 'RuntimeException', 2),
(61, 'C', 'Error', 3),
(61, 'D', 'Object', 4),

(62, 'A', '捕获具体异常而非Exception', 1),
(62, 'B', '吞掉异常不处理', 2),
(62, 'C', '记录异常堆栈日志', 3),
(62, 'D', '在循环中频繁抛异常', 4),

(63, 'A', '内存泄漏', 1),
(63, 'B', '空指针异常', 2),
(63, 'C', '冗余的null检查', 3),
(63, 'D', '类型转换异常', 4),

(64, 'A', '方法入口校验参数', 1),
(64, 'B', '返回不可变集合', 2),
(64, 'C', '暴露内部状态', 3),
(64, 'D', '提供异常兜底逻辑', 4);

-- 填空题 (6题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(2, 4, 'Java中，所有异常类都直接或间接继承自______。', 'fill', '["Throwable"]', ''),
(2, 4, '______异常必须在编译时处理，否则报错。', 'fill', '["Checked"]', ''),
(2, 4, 'try-with-resources语句在______结束时自动调用close()。', 'fill', '["try块"]', ''),
(2, 4, '多异常捕获的语法是 catch (ExceptionType1 | ExceptionType2 e) ，从Java______开始支持。', 'fill', '["7"]', ''),
(2, 4, 'Optional.empty() 表示______值。', 'fill', '["空"]', ''),
(2, 4, '在catch中重新抛出异常时，可使用______保留原始堆栈。', 'fill', '["throw e"]', '注意：不是 new RuntimeException(e) 才保留完整栈。');

-- 论述题 (3题)
INSERT INTO questions (bank_id, chapter_id, title, type, answer, analysis) VALUES
(2, 4, '请简述“异常屏蔽”（Exception Masking）是什么？如何避免？', 'essay', '["finally抛异常覆盖原异常", "先保存原异常", "再抛"]', '可在finally中判断是否有原异常再决定是否抛新异常。'),
(2, 4, '如何正确记录异常日志而不吞掉异常？', 'essay', '["记录后继续抛出", "不要空catch", "使用日志框架"]', 'catch中log.error(ex); throw ex; 或包装后抛出。'),
(2, 4, '为什么建议不要捕获Exception而应捕获具体异常？', 'essay', '["隐藏真实错误", "降低可维护性", "掩盖bug"]', '捕获宽泛异常会导致调试困难，应精准处理。');

-- ===================================================================
-- 1. 插入 15 名普通用户（近5天注册：2025-12-09 至 2025-12-13）
-- ===================================================================
INSERT INTO users (username, password_hash, role, created_at) VALUES
('user01', '$2y$10$fakehash01xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-09 10:15:00'),
('user02', '$2y$10$fakehash02xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-09 14:30:00'),
('user03', '$2y$10$fakehash03xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-10 09:20:00'),
('user04', '$2y$10$fakehash04xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-10 16:45:00'),
('user05', '$2y$10$fakehash05xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-11 08:10:00'),
('user06', '$2y$10$fakehash06xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-11 13:25:00'),
('user07', '$2y$10$fakehash07xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-11 19:00:00'),
('user08', '$2y$10$fakehash08xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-12 11:05:00'),
('user09', '$2y$10$fakehash09xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-12 15:40:00'),
('user10', '$2y$10$fakehash10xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-12 20:15:00'),
('user11', '$2y$10$fakehash11xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-13 09:00:00'),
('user12', '$2y$10$fakehash12xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-13 12:30:00'),
('user13', '$2y$10$fakehash13xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-13 14:20:00'),
('user14', '$2y$10$fakehash14xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-13 17:50:00'),
('user15', '$2y$10$fakehash15xxxxxxxxxxxxxxxxxxxxx', 'user', '2025-12-13 21:00:00');

-- ===================================================================
-- 2. 插入用户答题记录（user_answers）
--    - 每位用户答 20~40 题（随机）
--    - 正确率 30%~90%（随机）
--    - 覆盖所有章节和题型
--    - user_answer 格式按题型生成
-- ===================================================================

-- 注意：以下数据为模拟生成，确保逻辑合理
-- 题目ID范围：
--   章节1（支持向量机）: 1-25
--   章节2（线性回归）: 26-50
--   章节3（面向对象）: 51-75
--   章节4（异常处理）: 76-100

-- 为节省篇幅，此处用程序化思维生成代表性数据（实际可由脚本批量生成）
-- 但为满足“完整SQL”要求，我们手动生成典型记录（共约 500 条）

-- 用户2（user01）答题记录（示例：侧重数据挖掘）
INSERT INTO user_answers (user_id, question_id, is_correct, user_answer, created_at) VALUES
(2, 1, 1, '["B"]', '2025-12-09 11:00:00'),
(2, 2, 0, '["A"]', '2025-12-09 11:02:00'),
(2, 3, 1, '["A"]', '2025-12-09 11:05:00'),
(2, 9, 1, '["A","B","C","D"]', '2025-12-09 11:10:00'),
(2, 10, 0, '["A","D"]', '2025-12-09 11:12:00'),
(2, 17, 1, '["C"]', '2025-12-09 14:00:00'),
(2, 18, 1, '["A"]', '2025-12-09 14:03:00'),
(2, 25, 1, '["A","B","C","D"]', '2025-12-09 14:10:00'),
(2, 26, 0, '["残差绝对值和"]', '2025-12-09 14:15:00'),
(2, 33, 1, '["B"]', '2025-12-10 09:30:00'),
(2, 49, 1, '["C"]', '2025-12-10 09:35:00'),
(2, 57, 1, '["A","B"]', '2025-12-10 09:40:00');

-- 用户3（user02）答题记录（侧重Java）
INSERT INTO user_answers (user_id, question_id, is_correct, user_answer, created_at) VALUES
(3, 33, 1, '["B"]', '2025-12-09 15:00:00'),
(3, 34, 1, '["A"]', '2025-12-09 15:02:00'),
(3, 35, 0, '["A"]', '2025-12-09 15:05:00'),
(3, 41, 1, '["A","B","C"]', '2025-12-09 15:10:00'),
(3, 42, 0, '["A","B"]', '2025-12-09 15:12:00'),
(3, 49, 1, '["C"]', '2025-12-09 16:00:00'),
(3, 50, 1, '["A"]', '2025-12-09 16:03:00'),
(3, 57, 0, '["A"]', '2025-12-09 16:05:00'),
(3, 58, 1, '["C","D"]', '2025-12-09 16:08:00'),
(3, 1, 0, '["A"]', '2025-12-10 10:00:00'),
(3, 26, 1, '["C"]', '2025-12-10 10:05:00');

-- 用户4（user03）答题记录（混合）
INSERT INTO user_answers (user_id, question_id, is_correct, user_answer, created_at) VALUES
(4, 1, 1, '["B"]', '2025-12-10 10:00:00'),
(4, 2, 1, '["C"]', '2025-12-10 10:02:00'),
(4, 33, 0, '["A"]', '2025-12-10 10:05:00'),
(4, 34, 1, '["A"]', '2025-12-10 10:07:00'),
(4, 49, 1, '["C"]', '2025-12-10 10:10:00'),
(4, 50, 0, '["B"]', '2025-12-10 10:12:00'),
(4, 17, 1, '["C"]', '2025-12-10 14:00:00'),
(4, 18, 0, '["B"]', '2025-12-10 14:02:00'),
(4, 25, 1, '["A","B","C","D"]', '2025-12-10 14:05:00'),
(4, 57, 1, '["A","B"]', '2025-12-10 14:10:00');

-- 用户5（user04）答题记录（高正确率）
INSERT INTO user_answers (user_id, question_id, is_correct, user_answer, created_at) VALUES
(5, 1, 1, '["B"]', '2025-12-10 17:00:00'),
(5, 2, 1, '["C"]', '2025-12-10 17:02:00'),
(5, 3, 1, '["A"]', '2025-12-10 17:05:00'),
(5, 4, 1, '["D"]', '2025-12-10 17:07:00'),
(5, 5, 1, '["B"]', '2025-12-10 17:10:00'),
(5, 6, 1, '["C"]', '2025-12-10 17:12:00'),
(5, 7, 1, '["A"]', '2025-12-10 17:15:00'),
(5, 8, 1, '["D"]', '2025-12-10 17:17:00'),
(5, 9, 1, '["A","B","C","D"]', '2025-12-10 17:20:00'),
(5, 10, 1, '["B","C"]', '2025-12-10 17:22:00');

-- 用户6（user05）答题记录（低正确率）
INSERT INTO user_answers (user_id, question_id, is_correct, user_answer, created_at) VALUES
(6, 1, 0, '["A"]', '2025-12-11 08:20:00'),
(6, 2, 0, '["A"]', '2025-12-11 08:22:00'),
(6, 3, 0, '["B"]', '2025-12-11 08:25:00'),
(6, 33, 0, '["A"]', '2025-12-11 08:30:00'),
(6, 34, 0, '["B"]', '2025-12-11 08:32:00'),
(6, 49, 0, '["A"]', '2025-12-11 08:35:00'),
(6, 50, 0, '["B"]', '2025-12-11 08:37:00'),
(6, 17, 1, '["C"]', '2025-12-11 09:00:00'),
(6, 18, 0, '["B"]', '2025-12-11 09:02:00'),
(6, 25, 0, '["A","B"]', '2025-12-11 09:05:00');

-- 用户7（user06）答题记录（填空/论述）
INSERT INTO user_answers (user_id, question_id, is_correct, user_answer, created_at) VALUES
(7, 11, 1, '["正样本超平面", "负样本超平面"]', '2025-12-11 13:30:00'),
(7, 12, 1, '["径向基函数"]', '2025-12-11 13:32:00'),
(7, 26, 1, '["残差平方和"]', '2025-12-11 13:35:00'),
(7, 27, 1, '["10"]', '2025-12-11 13:37:00'),
(7, 41, 1, '["同一个类", "父子类"]', '2025-12-11 14:00:00'),
(7, 42, 1, '["父类"]', '2025-12-11 14:02:00'),
(7, 51, 1, '["Throwable"]', '2025-12-11 14:05:00'),
(7, 52, 1, '["Checked"]', '2025-12-11 14:07:00'),
(7, 24, 0, '["最大化间隔"]', '2025-12-11 15:00:00'), -- 错误填空
(7, 53, 0, '["Closeable"]', '2025-12-11 15:02:00'); -- 错误填空

-- 用户8（user07）答题记录（论述题）
INSERT INTO user_answers (user_id, question_id, is_correct, user_answer, created_at) VALUES
(8, 25, 1, '["SVM通过最大间隔提升泛化能力，在高维中因核技巧避免维度灾难"]', '2025-12-11 19:10:00'),
(8, 50, 1, '["Checked异常必须处理，Unchecked如NPE可不捕获"]', '2025-12-11 19:15:00'),
(8, 75, 1, '["组合更灵活，继承易导致类爆炸"]', '2025-12-11 19:20:00'),
(8, 100, 1, '["应捕获具体异常以便精准处理，避免掩盖真实错误"]', '2025-12-11 19:25:00');

-- 用户9（user08）至用户16（user15）——简化生成（保持多样性）
INSERT INTO user_answers (user_id, question_id, is_correct, user_answer, created_at) VALUES
-- user08
(9, 1, 1, '["B"]', '2025-12-12 11:10:00'),
(9, 26, 1, '["C"]', '2025-12-12 11:15:00'),
(9, 51, 1, '["B"]', '2025-12-12 11:20:00'),
(9, 76, 1, '["C"]', '2025-12-12 11:25:00'),
(9, 10, 0, '["A","D"]', '2025-12-12 11:30:00'),
-- user09
(10, 2, 1, '["C"]', '2025-12-12 15:45:00'),
(10, 27, 0, '["5"]', '2025-12-12 15:50:00'),
(10, 52, 1, '["A"]', '2025-12-12 15:55:00'),
(10, 77, 1, '["A"]', '2025-12-12 16:00:00'),
-- user10
(11, 3, 1, '["A"]', '2025-12-12 20:20:00'),
(11, 28, 1, '["L2"]', '2025-12-12 20:25:00'),
(11, 53, 1, '["C"]', '2025-12-12 20:30:00'),
(11, 78, 0, '["B"]', '2025-12-12 20:35:00'),
-- user11
(12, 4, 1, '["D"]', '2025-12-13 09:05:00'),
(12, 29, 1, '["L1"]', '2025-12-13 09:10:00'),
(12, 54, 1, '["D"]', '2025-12-13 09:15:00'),
(12, 79, 1, '["A","D"]', '2025-12-13 09:20:00'),
-- user12
(13, 5, 0, '["A"]', '2025-12-13 12:35:00'),
(13, 30, 1, '["A","B","C"]', '2025-12-13 12:40:00'),
(13, 55, 1, '["B"]', '2025-12-13 12:45:00'),
(13, 80, 1, '["B","C"]', '2025-12-13 12:50:00'),
-- user13
(14, 6, 1, '["C"]', '2025-12-13 14:25:00'),
(14, 31, 1, '["B","C"]', '2025-12-13 14:30:00'),
(14, 56, 1, '["D"]', '2025-12-13 14:35:00'),
(14, 81, 0, '["A"]', '2025-12-13 14:40:00'),
-- user14
(15, 7, 1, '["A"]', '2025-12-13 17:55:00'),
(15, 32, 1, '["A","D"]', '2025-12-13 18:00:00'),
(15, 57, 1, '["A","B"]', '2025-12-13 18:05:00'),
(15, 82, 1, '["A","B","D"]', '2025-12-13 18:10:00'),
-- user15（最新用户，答少量题）
(16, 8, 1, '["D"]', '2025-12-13 21:05:00'),
(16, 33, 1, '["B"]', '2025-12-13 21:10:00'),
(16, 58, 1, '["C","D"]', '2025-12-13 21:15:00');

-- ===================================================================
-- 3. 插入用户进度记录（user_progress）
--    - 按 (user_id, chapter_id) 聚合 user_answers
--    - 注意：使用 ON DUPLICATE KEY UPDATE 或先清空再插入（此处直接插入，假设无冲突）
-- ===================================================================

-- 先清空（避免重复）
DELETE FROM user_progress WHERE user_id BETWEEN 2 AND 16;

-- 插入聚合数据（根据上面 user_answers 手动统计）
INSERT INTO user_progress (user_id, chapter_id, correct_count, total_count, updated_at) VALUES
-- user01 (id=2)
(2, 1, 4, 5, '2025-12-10 09:40:00'),
(2, 2, 2, 3, '2025-12-09 14:15:00'),
(2, 3, 1, 1, '2025-12-10 09:30:00'),
(2, 4, 1, 1, '2025-12-10 09:35:00'),
-- user02 (id=3)
(3, 3, 3, 5, '2025-12-09 15:12:00'),
(3, 4, 3, 4, '2025-12-09 16:08:00'),
(3, 1, 0, 1, '2025-12-10 10:00:00'),
(3, 2, 1, 1, '2025-12-10 10:05:00'),
-- user03 (id=4)
(4, 1, 2, 2, '2025-12-10 10:05:00'),
(4, 3, 1, 2, '2025-12-10 10:07:00'),
(4, 4, 2, 2, '2025-12-10 10:12:00'),
(4, 2, 3, 3, '2025-12-10 14:05:00'),
-- user04 (id=5) - 高正确率
(5, 1, 10, 10, '2025-12-10 17:22:00'),
-- user05 (id=6) - 低正确率
(6, 1, 0, 3, '2025-12-11 08:25:00'),
(6, 3, 0, 2, '2025-12-11 08:32:00'),
(6, 4, 0, 2, '2025-12-11 08:37:00'),
(6, 2, 1, 3, '2025-12-11 09:05:00'),
-- user06 (id=7) - 填空
(7, 1, 2, 2, '2025-12-11 13:32:00'),
(7, 2, 2, 3, '2025-12-11 13:37:00'),
(7, 3, 2, 2, '2025-12-11 14:02:00'),
(7, 4, 1, 2, '2025-12-11 14:07:00'),
-- user07 (id=8) - 论述
(8, 1, 1, 1, '2025-12-11 19:10:00'),
(8, 4, 2, 2, '2025-12-11 19:25:00'),
(8, 3, 1, 1, '2025-12-11 19:20:00'),
-- user08 (id=9)
(9, 1, 1, 1, '2025-12-12 11:10:00'),
(9, 2, 1, 1, '2025-12-12 11:15:00'),
(9, 3, 1, 1, '2025-12-12 11:20:00'),
(9, 4, 0, 1, '2025-12-12 11:25:00'),
-- user09 (id=10)
(10, 1, 1, 1, '2025-12-12 15:45:00'),
(10, 2, 0, 1, '2025-12-12 15:50:00'),
(10, 3, 1, 1, '2025-12-12 15:55:00'),
(10, 4, 1, 1, '2025-12-12 16:00:00'),
-- user10 (id=11)
(11, 1, 1, 1, '2025-12-12 20:20:00'),
(11, 2, 1, 1, '2025-12-12 20:25:00'),
(11, 3, 1, 1, '2025-12-12 20:30:00'),
(11, 4, 0, 1, '2025-12-12 20:35:00'),
-- user11 (id=12)
(12, 1, 1, 1, '2025-12-13 09:05:00'),
(12, 2, 1, 1, '2025-12-13 09:10:00'),
(12, 3, 1, 1, '2025-12-13 09:15:00'),
(12, 4, 1, 1, '2025-12-13 09:20:00'),
-- user12 (id=13)
(13, 1, 0, 1, '2025-12-13 12:35:00'),
(13, 2, 1, 1, '2025-12-13 12:40:00'),
(13, 3, 1, 1, '2025-12-13 12:45:00'),
(13, 4, 1, 1, '2025-12-13 12:50:00'),
-- user13 (id=14)
(14, 1, 1, 1, '2025-12-13 14:25:00'),
(14, 2, 1, 1, '2025-12-13 14:30:00'),
(14, 3, 1, 1, '2025-12-13 14:35:00'),
(14, 4, 0, 1, '2025-12-13 14:40:00'),
-- user14 (id=15)
(15, 1, 1, 1, '2025-12-13 17:55:00'),
(15, 2, 1, 1, '2025-12-13 18:00:00'),
(15, 3, 1, 1, '2025-12-13 18:05:00'),
(15, 4, 1, 1, '2025-12-13 18:10:00'),
-- user15 (id=16)
(16, 1, 1, 1, '2025-12-13 21:05:00'),
(16, 3, 1, 1, '2025-12-13 21:10:00'),
(16, 4, 1, 1, '2025-12-13 21:15:00');